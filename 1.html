<div
data-section-id="{{ section.id }}"
data-section-type="slideshow-section"
data-align-top="true"
{% if section.settings.parallax %}data-parallax="true"{% endif %}>

{%- if section.blocks.size > 0 -%}
  <div class="slideshow-wrapper">
    {%- if section.settings.autoplay and section.settings.style == 'bars' and section.blocks.size > 1 -%}
      {%- style -%}
        .slick-slider[data-bars][data-autoplay="true"] .slick-dots li.slick-active button::before {
          animation-duration: {{ section.settings.autoplay_speed | times: 1000 }}ms;
        }
      {%- endstyle -%}

      <button type="button" class="visually-hidden slideshow__pause" data-id="{{ section.id }}" aria-live="polite">
        <span class="slideshow__pause-stop">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-pause" viewBox="0 0 10 13"><g fill="#000" fill-rule="evenodd"><path d="M0 0h3v13H0zM7 0h3v13H7z"/></g></svg>
          <span class="icon__fallback-text">{{ 'sections.slideshow.pause_slideshow' | t }}</span>
        </span>
        <span class="slideshow__pause-play">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-play" viewBox="18.24 17.35 24.52 28.3"><path fill="#323232" d="M22.1 19.151v25.5l20.4-13.489-20.4-12.011z"/></svg>
          <span class="icon__fallback-text">{{ 'sections.slideshow.play_slideshow' | t }}</span>
        </span>
      </button>
    {%- endif -%}

    {%- assign natural_height = false -%}
    {%- assign natural_mobile_height = false -%}
    {%- if section.settings.section_height == 'natural' or section.settings.mobile_height == 'auto' -%}
      {% comment %}
        Get first image's aspect ratio
      {% endcomment %}
    
      {%- for block in section.blocks limit: 1 -%}
        {%- if block.settings.image != blank -%}
          {%- if section.settings.section_height == 'natural' %}
            {%- assign natural_height = true -%}
            {%- capture natural_height_ratio -%}{{ 100 | divided_by: block.settings.image.aspect_ratio }}%{% endcapture %}
          {%- endif -%}
        {%- endif -%}
        {%- if block.settings.image_mobile != blank -%}
          {%- if section.settings.mobile_height == 'auto' -%}
            {%- assign natural_mobile_height = true -%}
            {%- capture natural_mobile_height_ratio -%}{{ 100 | divided_by: block.settings.image_mobile.aspect_ratio }}%{% endcapture %}
          {%- endif -%}
        {%- endif -%}
      {%- endfor -%}
    {%- endif -%}

    {%- if natural_height -%}
      {%- style -%}
        @media only screen and (min-width: 769px) {
          .hero-natural--{{ section.id }} {
            height: 0;
            padding-bottom: {{ natural_height_ratio }};
          }           
        }
      {%- endstyle -%}
    {%- endif -%}
    {%- if natural_mobile_height -%}
      {%- style -%}
        @media screen and (max-width: 768px) {
          .hero-natural-mobile--{{ section.id }} {
            height: 0;
            padding-bottom: {{ natural_mobile_height_ratio }};              
          }
          .hero-natural-mobile--{{ section.id }} .hero__text-wrap .hero__text-content{
            vertical-align:top;
            text-align:center;
          }
        }
      {%- endstyle -%}
    {%- endif -%}

    <div class="{% if natural_height %}hero-natural--{{ section.id }}{% endif %}{% if natural_mobile_height %} hero-natural-mobile--{{ section.id }}{% endif %}">
      <div id="Slideshow-{{ section.id }}"
        class="hero hero--{{ section.settings.section_height }} hero--{{ section.id }} hero--mobile--{{ section.settings.mobile_height }} loading loading--delayed"
        {% if natural_height %}
          data-natural="true"
        {% endif %}
        data-mobile-natural="{{natural_mobile_height}}"
        data-autoplay="{{ section.settings.autoplay }}"
        data-speed="{{ section.settings.autoplay_speed | times: 1000 }}"
        data-aos="hero__animation"
        {% if section.settings.style == 'arrows' %}
          data-arrows="true"
        {% endif %}
        {% if section.settings.style == 'dots' %}
          data-dots="true"
        {% endif %}
        {% if section.settings.style == 'bars' %}
          data-dots="true"
          data-bars="true"
        {% endif %}
        data-slide-count="{{ section.blocks.size }}">
        {%- for block in section.blocks -%}
          <div
            {{ block.shopify_attributes }}
            class="slideshow__slide slideshow__slide--{{ block.id }}"
            data-id="{{ block.id }}">

            {%- style -%}
              .slideshow__slide--{{ block.id }} .hero__title {
                font-size: 28px;
                color:{{block.settings.color_mobile}};
              }
              .slideshow__slide--{{ block.id }} .btn {
                padding:10px 20px !important;
              }
              @media only screen and (max-width: 767px) {                  
                .slideshow__slide--{{ block.id }} .btn {
                  min-width:150px;
                }
                .slideshow__slide--{{ block.id }}  .hero__text-content{
                  position:absolute;
                  width:{{block.settings.m_container-width}}%;         
                  text-align:center;           
                }
              }
              @media only screen and (min-width: 769px) {
                .slideshow__slide--{{ block.id }} .hero__title {
                  font-size: {{ block.settings.title_size }}px;
                  line-height:120%;
                  color:{{block.settings.color_desktop }};                  
                }          
                .slideshow__slide--{{ block.id }} .hero__subtitle {
                  font-size: 28px;
                  line-height: 120%;
                  margin: 10px 0 20px 0;
                }              
                .slideshow__slide--{{ block.id }} .hero__subtitle span{
                  font-size:32px;
                  font-weight:bold;
                }   
                .slideshow__slide--{{ block.id }}  .hero__text-content{
                  padding:0;
                  position:absolute;
                  width:{{block.settings.container-width}}%;
                  top:{{block.settings.text-position-top}}%;
                  left:{{block.settings.text-position-left}}%;     
                } 
                .slideshow__slide--{{ block.id }} .hero__link{
                  position:relative;
                  margin-top:{{block.settings.button-position-top}};
                }
              }                

              {%- assign button_alpha = block.settings.color_accent | color_extract: 'alpha' -%}
              {% unless button_alpha == 0.0 %}
                .slideshow__slide--{{ block.id }} .btn {
                  background: {{ block.settings.color_accent }} !important;
                  border: none;

                  {%- assign accent_brightness = block.settings.color_accent | color_extract: 'lightness' -%}

                  {% if accent_brightness > 40 %}
                    color: #fff !important;
                  {% endif %}
                }

                {% if settings.button_style == 'angled' %}
                  .slideshow__slide--{{ block.id }} .btn:before,
                  .slideshow__slide--{{ block.id }} .btn:after {
                    background: {{ block.settings.color_accent }} !important;
                    border: none;
                  }
                {% endif %}
              {% endunless %}
            {%- endstyle -%}

            {%- liquid
              assign hero_text = false
              assign link_slide = false
              if block.settings.top_subheading != blank or block.settings.title != blank or block.settings.subheading != blank or block.settings.link_text != blank
                assign hero_text = true
              endif
              if block.settings.link != blank and block.settings.link_2 == blank
                assign link_slide = true
              endif

              assign has_mobile_image = false
              if block.settings.image_mobile != blank
                assign has_mobile_image = true
              endif
            -%}

            {%- if section.settings.parallax -%}
              {%- if block.settings.image != blank or block.settings.image_mobile != blank -%}
                {%- style -%}
                  .hero__image--{{ block.id }} {
                    background-position: {{ block.settings.focal_point }};
                    background-size: cover;
                  }
                {%- endstyle -%}
              {%- endif -%}
              <div class="parallax-container">
                <div class="hero__image-wrapper">
                  <div
                    class="parallax-image hero__image hero__image--{{ block.id }}{% unless hero_text %} hero__image--no-overlay{% endunless %}{% if block.settings.image != blank %} lazyload{% else %} hero__image--svg{% endif %}{% if has_mobile_image %} small--hide{% endif %}"
                    {% if block.settings.image != blank %}
                      data-bgset="{% render 'bgset', image: block.settings.image %}"
                      data-sizes="auto"
                    {% endif %}>
                    {%- if block.settings.image == blank -%}
                      {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
                    {%- endif -%}
                  </div>
                  {%- if has_mobile_image -%}
                    <div
                      class="parallax-image hero__image hero__image--{{ block.id }} lazyload medium-up--hide"
                      data-bgset="{% render 'bgset', image: block.settings.image_mobile %}"
                      data-sizes="auto">
                    </div>
                  {%- endif -%}
                </div>
              </div>
            {%- else -%}
              <div class="hero__image-wrapper{% unless hero_text %} hero__image-wrapper--no-overlay{% endunless %}">
                {%- if block.settings.image != blank -%}
                  {%- style -%}
                    .hero__image--{{ block.id }} {
                      object-position: {{ block.settings.focal_point }};
                      font-family: "object-fit: cover; object-position: {{ block.settings.focal_point }};";
                    }
                  {%- endstyle -%}

                  {%- assign img_url = block.settings.image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}

                  <img class="image-fit hero__image hero__image--{{ block.id }} lazyload{% if has_mobile_image %} small--hide{% endif %}"
                    src="{{ block.settings.image | img_url:'100x' }}"
                    data-src="{{ img_url }}"
                    data-aspectratio="{{ block.settings.image.aspect_ratio }}"
                    data-sizes="auto"
                    data-parent-fit="cover"
                    alt="{{ block.settings.image.alt | escape }}">
                  {%- if has_mobile_image -%}
                    {%- assign img_url_mobile = block.settings.image_mobile | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                    <img class="image-fit hero__image hero__image--{{ block.id }} lazyload medium-up--hide"
                      src="{{ block.settings.image_mobile | img_url:'100x' }}"
                      data-src="{{ img_url_mobile }}"
                      data-aspectratio="{{ block.settings.image_mobile.aspect_ratio }}"
                      data-sizes="auto"
                      data-parent-fit="cover"
                      alt="{{ block.settings.image_mobile.alt | escape }}">
                  {%- endif -%}
                  <noscript>
                    <img class="image-fit hero__image hero__image--{{ block.id }}"
                      src="{{ block.settings.image | img_url: '1400x' }}"
                      alt="{{ block.settings.image.alt | escape }}">
                  </noscript>
                {%- else -%}
                  {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
                {%- endif -%}
              </div>
            {%- endif -%}

            {%- if link_slide -%}
              <a href="{{ block.settings.link }}" class="hero__slide-link" aria-hidden="true"></a>
            {%- endif -%}

            {%- if hero_text -%}
              <div class="hero__text-wrap">
               
                  <div class="hero__text-content">
                    <div class="hero__text-shadow">                      
                      {%- unless block.settings.title == blank -%}
                        <h2 class="h1 hero__title">
                          <div class="animation-cropper"><div class="animation-contents">
                          {{- block.settings.title | newline_to_br -}}
                          </div></div>
                        </h2>
                      {%- endunless -%}
                      {%- unless block.settings.top_subheading == blank -%}
                        <div class="hero__top-subtitle">
                          <div class="animation-cropper"><div class="animation-contents">
                            {{- block.settings.top_subheading  -}}
                          </div></div>
                        </div>
                      {%- endunless -%}
                      {%- if block.settings.subheading or block.settings.link or block.settings.link_2 -%}
                        {%- unless block.settings.subheading == blank -%}
                          <div class="hero__subtitle">
                            <div class="animation-cropper"><div class="animation-contents">
                              {{- block.settings.subheading  -}}
                            </div></div>
                          </div>
                        {%- endunless -%}
                        {%- if block.settings.link_text != blank or block.settings.link_text_2 != blank -%}
                          <div class="hero__link">
                            {%- if block.settings.link_text != blank -%}
                              <a href="{{ block.settings.link }}" class="btn{% if block.settings.color_accent contains 'rgba(0,0,0,0)' %} btn--inverse{% endif %}">
                                {{ block.settings.link_text }}
                              </a>
                            {%- endif -%}
                            {%- if block.settings.link_text_2 != blank -%}                              
                              <a data-fancybox="gallery" data-width="1280" data-height="720" data-caption="<a href='{{ block.settings.link }}' class='btn'>{{ block.settings.link_text }}</a>" data-small-btn="true" href="https://www.youtube.com/watch?v={{block.settings.youtubeid}}&amp;autoplay=1&amp;rel=0&amp;controls=0&amp;showinfo=0" class="btn btn-yt{% if block.settings.color_accent contains 'rgba(0,0,0,0)' %} btn--inverse{% endif %}">
                                {{ block.settings.link_text_2 }}
                              </a>
                              <a style="display: none;" data-fancybox="gallery-{{block.id}}" data-width="1280" data-height="720" data-caption="<a href='#shopify-section-product-recommendations-phillip' class='btn'>Buy Now</a>" data-small-btn="true" href="https://www.youtube.com/watch?v=LdCaX0Jn6AM&amp;autoplay=1&amp;rel=0&amp;controls=0&amp;showinfo=0" class="btn btn-yt btn--inverse">                     
                                Watch Video
                              </a>
                              <a style="display: none;" data-fancybox="gallery-{{block.id}}" data-width="1280" data-height="720" data-caption="<a href='#shopify-section-product-recommendations-phillip' class='btn'>Buy Now</a>" data-small-btn="true" href="https://www.youtube.com/watch?v=VT9-bs-fbiU&amp;autoplay=1&amp;rel=0&amp;controls=0&amp;showinfo=0" class="btn btn-yt btn--inverse">                     
                                Watch Video
                              </a>
                              <a style="display: none;" data-fancybox="gallery-{{block.id}}" data-width="1280" data-height="720" data-caption="<a href='#shopify-section-product-recommendations-phillip' class='btn'>Buy Now</a>" data-small-btn="true" href="https://www.youtube.com/watch?v=rudzDsOoYvk&amp;autoplay=1&amp;rel=0&amp;controls=0&amp;showinfo=0" class="btn btn-yt btn--inverse">                     
                                Watch Video
                              </a>
                            {%- endif -%}
                          </div>
                        {%- endif -%}
                      {%- endif -%}
                    </div>
                  </div>
             
              </div>                
            {%- endif -%}
          </div>
        {%- endfor -%}
      </div>
    </div>
  </div>
{%- endif -%}
